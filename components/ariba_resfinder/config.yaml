#-Information---------------------------------------------------------------------------------------
name: ariba_resfinder
category: &category Resistance
version: 2.0
schema_version: 2.0
target: sample
type: pipeline
recommendation: recommended
requires_db: True
description: >
  This preforms read based mapping against the resfinder DB's. The options show the species entries 
  which will be attempted for mlst with key originating from the species DB. This is done against 
  the cge_db using ariba.
#---------------------------------------------------------------------------------------------------

#-Docker location-----------------------------------------------------------------------------------
dockerfile: &dockerfile "docker://ssidk/bifrost-ariba_resfinder:2.0"
#---------------------------------------------------------------------------------------------------

#-Options-------------------------------------------------------------------------------------------
options:
#---------------------------------------------------------------------------------------------------

#-Required resource files---------------------------------------------------------------------------
# Relative files are relative to this components folder if not using an absolute path, a recommended
# strategy for shrared resources is to symlink the resource from the root resources folder into
# the component resources folder. This will prevent
database_path: "/bifrost_resources/resfinder_db/ref_db"
#---------------------------------------------------------------------------------------------------

#-Requirements to run component---------------------------------------------------------------------
requirements:
  sample:
    reads:
      R1:
      R2:
#-DB Value changes (excluding component output)-----------------------------------------------------
db_values_changes:
  files: ["report.tsv"]
  sample:
    properties:
      mlst:
        species:  # str for mlst_db
        results:
          sequence_type:  #str
          allele_profile: {}
        component:
          _id: "ObjectId"
          date: "datetime"
    reporter:
      mlst:
        title: *category
        info: *dockerfile
        content: [["db", "strain", "alleles"]]
#---------------------------------------------------------------------------------------------------
